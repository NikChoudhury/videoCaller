<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="scss/style.css" />
    <!-- Bootstrap Css -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      crossorigin="anonymous"
    />
    <!-- END Bootstrap Css -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.8/css/all.css"
    />

    <title>Sign Up</title>
  </head>

  <body>
    <div class="container">
      <div
        class="row justify-content-center align-items-center"
        style="height: 100vh"
      >
        <div class="col-md-4">
          <div class="card w-100">
            <article class="card-body">
              <a href="/signin" class="float-right btn btn-outline-primary"
                >Sign In</a
              >
              <h4 class="card-title mb-4 mt-1">Sign Up</h4>
              <form
                action=""
                class="register-form"
                id="registerForm"
                method="POST"
              >
                <h5 class="text-danger error"></h5>
                <div class="form-group">
                  <label>User Name</label>
                  <input
                    name="username"
                    class="form-control"
                    placeholder="Username"
                    type="text"
                    id="username"
                  />
                  <small class="text-danger" id="usernameErr"></small>
                </div>
                <div class="form-group">
                  <label>Your email</label>
                  <input
                    name="email"
                    class="form-control"
                    placeholder="Email"
                    type="email"
                    id="email"
                  />
                  <small class="text-danger" id="emailErr"></small>
                </div>
                <!-- form-group// -->
                <div class="form-group">
                  <label>Your password</label>
                  <input
                    name="pass"
                    class="form-control"
                    placeholder="******"
                    type="password"
                    id="pass"
                  />
                  <small class="text-danger" id="passErr"></small>
                </div>

                <!-- form-group// -->
                <div class="form-group">
                  <button
                    type="submit"
                    id="regbtn"
                    class="btn btn-primary btn-block"
                  >
                    Sign Up
                  </button>
                </div>
                <!-- form-group// -->
              </form>
            </article>
          </div>
          <!-- card.// -->
        </div>
        <!-- Col End -->
      </div>
      <!-- Row End -->
    </div>
    <!--container end.//-->
    <!-- Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
      integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
      crossorigin="anonymous"
    ></script>
    <!-- Bootstrap JS //-->
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <!-- Form Submit With Ajax -->
    <script>
      $(document).ready(function () {
        $("#registerForm").on("submit", (event) => {
          let username = $("#username").val(),
            email = $("#email").val(),
            pass = $("#pass").val(),
            proceed = true;
          event.preventDefault();

          $("#registerForm input").each(function () {
            $(this).css("border-color", "");
            if (!$.trim($(this).val())) {
              //if this field is empty
              $(".error").text("All Fields Are Required !!");
              $(this).css("border-color", "red"); //change border color to red
              proceed = false; //set do not proceed flag
            }
          });
          if (proceed) {
            //if form is valid submit form
            $(".error").text("");
            $.ajax({
              url: "/signup",
              method: "POST",
              data: {
                username,
                email,
                pass,
              },
              success: function (data) {
                console.log(data); // show response from the php script.
              },
            });
            return true;
          }

          $("#registerForm input").keyup(function () {
            $(this).css("border-color", "");
            // $("#result").slideUp();
          });
        });
      });
    </script>
    <!-- /// -->
  </body>
</html>
